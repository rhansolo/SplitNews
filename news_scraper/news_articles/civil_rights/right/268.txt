Shouts of “shame, shame, shame” erupted in the U.S. House of Representatives on Thursday as Republican lawmakers narrowly defeated legislation to protect the civil rights of lesbian, gay, bisexual and transgender employees of government contractors.

The measure, an amendment to a veterans and military construction spending bill introduced by New York Democrat Sean Maloney, initially had enough “yes” votes to pass, according to the count in the House chamber.

But House Republican leaders extended the time allowed for the vote as they urged enough party members to change their positions to defeat it by a vote of 213 to 212.

All 183 Democrats who voted backed the amendment, joined by 29 Republicans. All 213 “no’s” were from Republicans. Eight House members – three Republicans and five Democrats – did not vote.

LGBT rights have been a hot-button issue during the 2016 election season. National politics have featured debate over whether making cakes for same-sex couples violates bakers’ religious freedom or whether the government should decide which public bathrooms are used by transgender people.

Democrats chanted “shame, shame, shame” at Republicans, drawing attention to the vote. Steny Hoyer, the number two House Democrat, denounced it in a fiery speech. “We had 217 people for non-discrimination right up until the last moment,” he said.

Thursday’s emotional vote came hours after the House late on Wednesday passed a $602 billion defense authorization bill that included “religious freedom” language that critics said would allow contractors to discriminate against LGBT individuals.

The House Rules committee had angered Democrats by voting along party lines late on Tuesday not to allow a vote on an amendment to the National Defense Authorization Act that would have eliminated that language.

Republicans who backed the provision said it was necessary to protect the religious rights of military contractors and not intended to be discriminatory.